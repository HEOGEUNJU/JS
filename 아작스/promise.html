<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
<script>
    // promise(약속)를 모르면 옛날 사람!
    // 미래에 어떡하징(지켜질 수도 있고(resolve), 안 지켜질수도 있지요(reject))
    // 자바스크립트에서 비동기가 많이 사용되고, 비동기 처리에
    // 콜백함수(예를 들면 success)를 많이 사용하다 보니, 콜백 지옥이란 말이 탄생
    // 요걸 쪼매 편하게 보이게 만든게 promise
    // 처음에 미친듯이 낯설음.(처음에만, 3번 보면 그저 그러려니)

    const Axios = {}; // 네임스페이스용 빈 객체(빈 객체 아니여도 상관없음, 본인 맘대로 객체이기만 하면 됨)
    
    // 객체에 메소드 추가
    Axios.get = function(p_url){
        return new Promise((res, rej)=>{ // promise와의 첫 만남 - 아우 설레용~~
            //res("약속이 지켜졌어용");
            // let error = new Error("에러났어용");
            // rej(error);
            let xhr = new XMLHttpRequest();
            xhr.open("get",p_url,true);
            xhr.onreadystatechange = function(){
                if(xhr.readyState == 4 && xhr.status == 200){
                    res(xhr.responseText);
                }
            }
            xhr.send();
        });
    }

    // 요렇게 사용되는 스타일이 중요!
   

    // f_promise().then((rslt)=>{
    //     console.log("체크:" , rslt);
    // }).catch((error)=>{
    //     console.log("체크2" ,error);
    // })
    /*finally는 잘 안씀
    .finally(()=>{
        console.log("무조건 실행되어용");
    });
    */
   
 // /로 시작하면 절대경로, jsstudy/아작스/data.csv는 상대경로
    Axios.get("/jsstudy/아작스/data.csv")
        .then((p_rslt)=>{
            console.log(p_rslt);
        });
    Axios.get("/jsstudy/아작스/data.json").then((p_rslt)=>{
        console.log(p_rslt);
    });
       
    console.log("선민? "); // 가장 먼저 찍힘 왜? 비동기라서.



</script>